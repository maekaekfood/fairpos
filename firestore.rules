
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Helper function to check if a user is authenticated
    function isAuthenticated() {
      return request.auth != null;
    }

    // Products: Authenticated users can read/write
    match /products/{productId} {
      allow read, write: if isAuthenticated();
    }

    // Settings: Authenticated users can read/write
    match /settings/{settingId} {
      allow read, write: if isAuthenticated();
    }

    // Transactions: Authenticated users can create and read
    match /transactions/{transactionId} {
      allow get, list, create: if isAuthenticated();
      // Allow update/delete only if needed, for now it's restricted
      allow update, delete: if false;
    }
  }
}
